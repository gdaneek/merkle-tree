\hypertarget{classmerkle_1_1TreeBase}{}\doxysection{merkle\+::Tree\+Base$<$ Derived, Hash\+Func $>$ Class Template Reference}
\label{classmerkle_1_1TreeBase}\index{merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}}


a base template class for building Merkle trees based on CRTP  




{\ttfamily \#include $<$merkle.\+hpp$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase_ac6b5c1e3375233161d4e19654e6b5c4c}{hash}} (\mbox{\hyperlink{concepts_8hh_ad6c3fc430f7e150c1dab8837755fd641}{Contiguous\+Container}} auto \&\&ccont) const
\begin{DoxyCompactList}\small\item\em hash function wrapper that allows you to call it for any continuous container \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classmerkle_1_1TreeBase_af3dcd283a84eb8bb98021331b0120203}{height}} () const
\begin{DoxyCompactList}\small\item\em function that calculates the height of a current Merkle tree \end{DoxyCompactList}\item 
constexpr size\+\_\+t \mbox{\hyperlink{classmerkle_1_1TreeBase_ad35655e38316e0d8c9a25ff6e2116c53}{size}} () const
\begin{DoxyCompactList}\small\item\em function that calculates the number of elements (hashes) for a current Merkle tree \end{DoxyCompactList}\item 
constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase_a848a40df2b9f0a4c914b3cea86cd7734}{leaf\+\_\+hash}} (auto \&\&... args) const
\begin{DoxyCompactList}\small\item\em calculates the hash of a tree leaf \end{DoxyCompactList}\item 
constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase_ae46ad7d436941315d6b9a831f6b18f30}{node\+\_\+hash}} (auto \&\&... args) const
\begin{DoxyCompactList}\small\item\em calculates the hash of a tree node \end{DoxyCompactList}\item 
constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase_a48d5593ad35b425b3693af6fd2eac63c}{verify}} (auto \&\&data) const
\begin{DoxyCompactList}\small\item\em checks whether the data block was used when creating the Merkle tree \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classmerkle_1_1TreeBase_a2a0b01bb14099f6606b164b025611496}\label{classmerkle_1_1TreeBase_a2a0b01bb14099f6606b164b025611496}} 
constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase_a2a0b01bb14099f6606b164b025611496}{has}} (auto \&\&data) const
\begin{DoxyCompactList}\small\item\em an alias for verify \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static constexpr size\+\_\+t \mbox{\hyperlink{classmerkle_1_1TreeBase_ad89b16e22d339ec7df37c41def63d20a}{height}} (const size\+\_\+t leafs\+\_\+n)
\begin{DoxyCompactList}\small\item\em a function that allows you to find out the height of any Merkle tree by the number of leaves \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classmerkle_1_1TreeBase_ad43e67ff354f9e2ddd9271d0c2178f3e}\label{classmerkle_1_1TreeBase_ad43e67ff354f9e2ddd9271d0c2178f3e}} 
static constexpr size\+\_\+t {\bfseries size} (const size\+\_\+t leafs\+\_\+n)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Types}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classmerkle_1_1TreeBase_a83a309d21359cb71ee13ded3ee0e21d4}\label{classmerkle_1_1TreeBase_a83a309d21359cb71ee13ded3ee0e21d4}} 
using \mbox{\hyperlink{classmerkle_1_1TreeBase_a83a309d21359cb71ee13ded3ee0e21d4}{hash\+\_\+t}} = typename std\+::invoke\+\_\+result\+\_\+t$<$ Hash\+Func, uint8\+\_\+t $\ast$, size\+\_\+t $>$
\begin{DoxyCompactList}\small\item\em hash function return data type \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T $>$ }\\constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase_afd5f719ffdf0ed98c2bc0b82345777fc}{hash}} (T const $\ast$const input, const size\+\_\+t sz) const
\begin{DoxyCompactList}\small\item\em calls a hashing function for objects of any type that are continuously located in memory \end{DoxyCompactList}\item 
constexpr \mbox{\hyperlink{classmerkle_1_1TreeBase_a2261c2ac7d994e7009c77317e262cb86}{Tree\+Base}} (const Hash\+Func \&h)
\begin{DoxyCompactList}\small\item\em default constructor \end{DoxyCompactList}\item 
constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase_a800301fc082aab9032cdff7cee4ce701}{find\+\_\+leaf}} (auto \&\&data) const
\begin{DoxyCompactList}\small\item\em a function that finds a leaf of the Merkle tree in the hash container corresponding to the input data \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename Derived, typename Hash\+Func$>$\newline
class merkle\+::\+Tree\+Base$<$ Derived, Hash\+Func $>$}

a base template class for building Merkle trees based on CRTP 

Class defines the required interface using concepts and provides auxiliary methods for calculating the size, height, leaf search, etc..., through inheritance. All trees inheriting this automatically have some principles for ensuring security, such as double hashing with salt (protection against Second Preimage / Length Extension Attacks if the hash function is based on Merkleâ€“\+Damgard) and two generalized algorithms for building a tree (todo status). 
\begin{DoxyTemplParams}{Template Parameters}
{\em Derived} & concrete implementation of the Merkle tree \\
\hline
{\em Hash\+Func} & type of hash function \\
\hline
\end{DoxyTemplParams}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classmerkle_1_1TreeBase_a2261c2ac7d994e7009c77317e262cb86}\label{classmerkle_1_1TreeBase_a2261c2ac7d994e7009c77317e262cb86}} 
\index{merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}!TreeBase@{TreeBase}}
\index{TreeBase@{TreeBase}!merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}}
\doxysubsubsection{\texorpdfstring{TreeBase()}{TreeBase()}}
{\footnotesize\ttfamily template$<$typename Derived , typename Hash\+Func $>$ \\
constexpr \mbox{\hyperlink{classmerkle_1_1TreeBase}{merkle\+::\+Tree\+Base}}$<$ Derived, Hash\+Func $>$\+::\mbox{\hyperlink{classmerkle_1_1TreeBase}{Tree\+Base}} (\begin{DoxyParamCaption}\item[{const Hash\+Func \&}]{h }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}, {\ttfamily [constexpr]}, {\ttfamily [protected]}}



default constructor 


\begin{DoxyParams}{Parameters}
{\em h} & link to the hash function that will be used to build the tree \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classmerkle_1_1TreeBase_a800301fc082aab9032cdff7cee4ce701}\label{classmerkle_1_1TreeBase_a800301fc082aab9032cdff7cee4ce701}} 
\index{merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}!find\_leaf@{find\_leaf}}
\index{find\_leaf@{find\_leaf}!merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}}
\doxysubsubsection{\texorpdfstring{find\_leaf()}{find\_leaf()}}
{\footnotesize\ttfamily template$<$typename Derived , typename Hash\+Func $>$ \\
constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase}{merkle\+::\+Tree\+Base}}$<$ Derived, Hash\+Func $>$\+::find\+\_\+leaf (\begin{DoxyParamCaption}\item[{auto \&\&}]{data }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [constexpr]}, {\ttfamily [protected]}}



a function that finds a leaf of the Merkle tree in the hash container corresponding to the input data 


\begin{DoxyParams}{Parameters}
{\em data} & any data that can be hashed \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
position where the leaf hash corresponding to the {\ttfamily data} arg is located 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
if the transmitted data was not used when creating tree, it returns -\/1 

O(\+N) complexity where N is equal to the number of leaves in the tree 
\end{DoxyNote}
\mbox{\Hypertarget{classmerkle_1_1TreeBase_ac6b5c1e3375233161d4e19654e6b5c4c}\label{classmerkle_1_1TreeBase_ac6b5c1e3375233161d4e19654e6b5c4c}} 
\index{merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}!hash@{hash}}
\index{hash@{hash}!merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}}
\doxysubsubsection{\texorpdfstring{hash()}{hash()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename Derived , typename Hash\+Func $>$ \\
constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase}{merkle\+::\+Tree\+Base}}$<$ Derived, Hash\+Func $>$\+::hash (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{concepts_8hh_ad6c3fc430f7e150c1dab8837755fd641}{Contiguous\+Container}} auto \&\&}]{ccont }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [constexpr]}}



hash function wrapper that allows you to call it for any continuous container 


\begin{DoxyParams}{Parameters}
{\em ccont} & any continuous container object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
result of calling the hash function, which calculates the hash from the ccont as a hash from a sequence of bytes 
\end{DoxyReturn}
\mbox{\Hypertarget{classmerkle_1_1TreeBase_afd5f719ffdf0ed98c2bc0b82345777fc}\label{classmerkle_1_1TreeBase_afd5f719ffdf0ed98c2bc0b82345777fc}} 
\index{merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}!hash@{hash}}
\index{hash@{hash}!merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}}
\doxysubsubsection{\texorpdfstring{hash()}{hash()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename Derived , typename Hash\+Func $>$ \\
template$<$typename T $>$ \\
constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase}{merkle\+::\+Tree\+Base}}$<$ Derived, Hash\+Func $>$\+::hash (\begin{DoxyParamCaption}\item[{T const $\ast$const}]{input,  }\item[{const size\+\_\+t}]{sz }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [constexpr]}, {\ttfamily [protected]}}



calls a hashing function for objects of any type that are continuously located in memory 


\begin{DoxyTemplParams}{Template Parameters}
{\em T} & type of objects \\
\hline
\end{DoxyTemplParams}

\begin{DoxyParams}{Parameters}
{\em input} & pointer to the first object \\
\hline
{\em sz} & number of objects \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
result of calling the hash function, which calculates the hash from the data as a hash from a sequence of bytes 
\end{DoxyReturn}
\mbox{\Hypertarget{classmerkle_1_1TreeBase_af3dcd283a84eb8bb98021331b0120203}\label{classmerkle_1_1TreeBase_af3dcd283a84eb8bb98021331b0120203}} 
\index{merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}!height@{height}}
\index{height@{height}!merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}}
\doxysubsubsection{\texorpdfstring{height()}{height()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename Derived , typename Hash\+Func $>$ \\
size\+\_\+t \mbox{\hyperlink{classmerkle_1_1TreeBase}{merkle\+::\+Tree\+Base}}$<$ Derived, Hash\+Func $>$\+::height (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



function that calculates the height of a current Merkle tree 

\begin{DoxyReturn}{Returns}
tree height 
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
If the tree has zero or one (only root) nodes, then the height is zero 
\end{DoxyWarning}
\mbox{\Hypertarget{classmerkle_1_1TreeBase_ad89b16e22d339ec7df37c41def63d20a}\label{classmerkle_1_1TreeBase_ad89b16e22d339ec7df37c41def63d20a}} 
\index{merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}!height@{height}}
\index{height@{height}!merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}}
\doxysubsubsection{\texorpdfstring{height()}{height()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename Derived , typename Hash\+Func $>$ \\
static constexpr size\+\_\+t \mbox{\hyperlink{classmerkle_1_1TreeBase}{merkle\+::\+Tree\+Base}}$<$ Derived, Hash\+Func $>$\+::height (\begin{DoxyParamCaption}\item[{const size\+\_\+t}]{leafs\+\_\+n }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [constexpr]}}



a function that allows you to find out the height of any Merkle tree by the number of leaves 


\begin{DoxyParams}{Parameters}
{\em leafs\+\_\+n} & number of leaves in Merkle tree \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
tree height 
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
If the tree has zero or one (only root) nodes, then the height is zero 
\end{DoxyWarning}
\mbox{\Hypertarget{classmerkle_1_1TreeBase_a848a40df2b9f0a4c914b3cea86cd7734}\label{classmerkle_1_1TreeBase_a848a40df2b9f0a4c914b3cea86cd7734}} 
\index{merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}!leaf\_hash@{leaf\_hash}}
\index{leaf\_hash@{leaf\_hash}!merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}}
\doxysubsubsection{\texorpdfstring{leaf\_hash()}{leaf\_hash()}}
{\footnotesize\ttfamily template$<$typename Derived , typename Hash\+Func $>$ \\
constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase}{merkle\+::\+Tree\+Base}}$<$ Derived, Hash\+Func $>$\+::leaf\+\_\+hash (\begin{DoxyParamCaption}\item[{auto \&\&...}]{args }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [constexpr]}}



calculates the hash of a tree leaf 

uses double leaf hashing to protect against Length Extension Attack 
\begin{DoxyParams}{Parameters}
{\em args} & parameters for calling the hash function (see hash method overloads) \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classmerkle_1_1TreeBase_ae46ad7d436941315d6b9a831f6b18f30}\label{classmerkle_1_1TreeBase_ae46ad7d436941315d6b9a831f6b18f30}} 
\index{merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}!node\_hash@{node\_hash}}
\index{node\_hash@{node\_hash}!merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}}
\doxysubsubsection{\texorpdfstring{node\_hash()}{node\_hash()}}
{\footnotesize\ttfamily template$<$typename Derived , typename Hash\+Func $>$ \\
constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase}{merkle\+::\+Tree\+Base}}$<$ Derived, Hash\+Func $>$\+::node\+\_\+hash (\begin{DoxyParamCaption}\item[{auto \&\&...}]{args }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [constexpr]}}



calculates the hash of a tree node 


\begin{DoxyParams}{Parameters}
{\em args} & parameters for calling the hash function (see hash method overloads) \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classmerkle_1_1TreeBase_ad35655e38316e0d8c9a25ff6e2116c53}\label{classmerkle_1_1TreeBase_ad35655e38316e0d8c9a25ff6e2116c53}} 
\index{merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}!size@{size}}
\index{size@{size}!merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}}
\doxysubsubsection{\texorpdfstring{size()}{size()}}
{\footnotesize\ttfamily template$<$typename Derived , typename Hash\+Func $>$ \\
constexpr size\+\_\+t \mbox{\hyperlink{classmerkle_1_1TreeBase}{merkle\+::\+Tree\+Base}}$<$ Derived, Hash\+Func $>$\+::size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [constexpr]}}



function that calculates the number of elements (hashes) for a current Merkle tree 

\begin{DoxyReturn}{Returns}
number of hashes in tree 
\end{DoxyReturn}
\mbox{\Hypertarget{classmerkle_1_1TreeBase_a48d5593ad35b425b3693af6fd2eac63c}\label{classmerkle_1_1TreeBase_a48d5593ad35b425b3693af6fd2eac63c}} 
\index{merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}!verify@{verify}}
\index{verify@{verify}!merkle::TreeBase$<$ Derived, HashFunc $>$@{merkle::TreeBase$<$ Derived, HashFunc $>$}}
\doxysubsubsection{\texorpdfstring{verify()}{verify()}}
{\footnotesize\ttfamily template$<$typename Derived , typename Hash\+Func $>$ \\
constexpr auto \mbox{\hyperlink{classmerkle_1_1TreeBase}{merkle\+::\+Tree\+Base}}$<$ Derived, Hash\+Func $>$\+::verify (\begin{DoxyParamCaption}\item[{auto \&\&}]{data }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [constexpr]}}



checks whether the data block was used when creating the Merkle tree 

If the method returns some index that is not equal to the maximum allowed size\+\_\+t value, therefore, the input data has a corresponding leaf in the tree 
\begin{DoxyParams}{Parameters}
{\em data} & any data that can be hashed \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{merkle_8hpp}{merkle.\+hpp}}\end{DoxyCompactItemize}
